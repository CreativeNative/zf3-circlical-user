language: php

php:
  - 7.0
  - 7.1

before_install:
  - sudo apt-get update
  - sudo apt-get install php-pear -y
  - sudo add-apt-repository ppa:ondrej/php -y
  - sudo apt-get update -q
  - sudo apt-get install libsodium-dev -y

before_script:
  - pecl install libsodium
  - composer install --prefer-source --no-interaction

script: vendor/bin/phpspec --config=phpspec.yml run

after_script: vendor/bin/codacycoverage clover build/coverage.xml