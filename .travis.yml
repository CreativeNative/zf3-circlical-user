language: php

dist: trusty
sudo: required

php:
  - 7.0
  - 7.1

before_install:
  - sudo apt-get update
  - sudo apt-get install -y php-pear software-properties-common
  - sudo bash -c "LC_ALL=C.UTF-8 add-apt-repository -y ppa:ondrej/php"
  - sudo apt-get update
  - sudo apt-get install -y libsodium-dev

before_script:
  - pecl install libsodium
  - composer install --prefer-source --no-interaction

script: vendor/bin/phpspec --config=phpspec.yml run

after_script: vendor/bin/codacycoverage clover build/coverage.xml